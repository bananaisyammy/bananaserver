execute as @e[type=item_display,tag=note_detector] at @s run tp @s ~ ~ ~1

# light_blue (jumpover)
execute as @e[type=item_display,tag=note_detector] at @s if block ~1 ~ ~ light_blue_wool run summon block_display 1047.0 ~ 1086.5 {block_state:{Name:"light_blue_wool"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~2 ~ ~ light_blue_wool run summon block_display 1048.0 ~ 1086.5 {block_state:{Name:"light_blue_wool"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~3 ~ ~ light_blue_wool run summon block_display 1049.0 ~ 1086.5 {block_state:{Name:"light_blue_wool"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~4 ~ ~ light_blue_wool run summon block_display 1050.0 ~ 1086.5 {block_state:{Name:"light_blue_wool"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~5 ~ ~ light_blue_wool run summon block_display 1051.0 ~ 1086.5 {block_state:{Name:"light_blue_wool"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~6 ~ ~ light_blue_wool run summon block_display 1052.0 ~ 1086.5 {block_state:{Name:"light_blue_wool"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~7 ~ ~ light_blue_wool run summon block_display 1053.0 ~ 1086.5 {block_state:{Name:"light_blue_wool"},Tags:["note","init_note","jumpover"],teleport_duration:59}

execute as @e[type=item_display,tag=note_detector] at @s if block ~1 ~ ~ light_blue_concrete run summon block_display 1047.0 ~ 1086.5 {block_state:{Name:"light_blue_concrete"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~2 ~ ~ light_blue_concrete run summon block_display 1048.0 ~ 1086.5 {block_state:{Name:"light_blue_concrete"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~3 ~ ~ light_blue_concrete run summon block_display 1049.0 ~ 1086.5 {block_state:{Name:"light_blue_concrete"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~4 ~ ~ light_blue_concrete run summon block_display 1050.0 ~ 1086.5 {block_state:{Name:"light_blue_concrete"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~5 ~ ~ light_blue_concrete run summon block_display 1051.0 ~ 1086.5 {block_state:{Name:"light_blue_concrete"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~6 ~ ~ light_blue_concrete run summon block_display 1052.0 ~ 1086.5 {block_state:{Name:"light_blue_concrete"},Tags:["note","init_note","jumpover"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~7 ~ ~ light_blue_concrete run summon block_display 1053.0 ~ 1086.5 {block_state:{Name:"light_blue_concrete"},Tags:["note","init_note","jumpover"],teleport_duration:59}

# lime (onjump)
execute as @e[type=item_display,tag=note_detector] at @s if block ~1 ~ ~ lime_wool run summon block_display 1047.0 ~ 1086.5 {block_state:{Name:"lime_wool"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~2 ~ ~ lime_wool run summon block_display 1048.0 ~ 1086.5 {block_state:{Name:"lime_wool"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~3 ~ ~ lime_wool run summon block_display 1049.0 ~ 1086.5 {block_state:{Name:"lime_wool"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~4 ~ ~ lime_wool run summon block_display 1050.0 ~ 1086.5 {block_state:{Name:"lime_wool"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~5 ~ ~ lime_wool run summon block_display 1051.0 ~ 1086.5 {block_state:{Name:"lime_wool"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~6 ~ ~ lime_wool run summon block_display 1052.0 ~ 1086.5 {block_state:{Name:"lime_wool"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~7 ~ ~ lime_wool run summon block_display 1053.0 ~ 1086.5 {block_state:{Name:"lime_wool"},Tags:["note","init_note","onjump"],teleport_duration:59}

execute as @e[type=item_display,tag=note_detector] at @s if block ~1 ~ ~ lime_concrete run summon block_display 1047.0 ~ 1086.5 {block_state:{Name:"lime_concrete"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~2 ~ ~ lime_concrete run summon block_display 1048.0 ~ 1086.5 {block_state:{Name:"lime_concrete"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~3 ~ ~ lime_concrete run summon block_display 1049.0 ~ 1086.5 {block_state:{Name:"lime_concrete"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~4 ~ ~ lime_concrete run summon block_display 1050.0 ~ 1086.5 {block_state:{Name:"lime_concrete"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~5 ~ ~ lime_concrete run summon block_display 1051.0 ~ 1086.5 {block_state:{Name:"lime_concrete"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~6 ~ ~ lime_concrete run summon block_display 1052.0 ~ 1086.5 {block_state:{Name:"lime_concrete"},Tags:["note","init_note","onjump"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~7 ~ ~ lime_concrete run summon block_display 1053.0 ~ 1086.5 {block_state:{Name:"lime_concrete"},Tags:["note","init_note","onjump"],teleport_duration:59}

# yellow (avoid)
execute as @e[type=item_display,tag=note_detector] at @s if block ~1 ~ ~ yellow_wool run summon block_display 1047.0 ~ 1086.5 {block_state:{Name:"yellow_wool"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~2 ~ ~ yellow_wool run summon block_display 1048.0 ~ 1086.5 {block_state:{Name:"yellow_wool"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~3 ~ ~ yellow_wool run summon block_display 1049.0 ~ 1086.5 {block_state:{Name:"yellow_wool"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~4 ~ ~ yellow_wool run summon block_display 1050.0 ~ 1086.5 {block_state:{Name:"yellow_wool"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~5 ~ ~ yellow_wool run summon block_display 1051.0 ~ 1086.5 {block_state:{Name:"yellow_wool"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~6 ~ ~ yellow_wool run summon block_display 1052.0 ~ 1086.5 {block_state:{Name:"yellow_wool"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~7 ~ ~ yellow_wool run summon block_display 1053.0 ~ 1086.5 {block_state:{Name:"yellow_wool"},Tags:["note","init_note","avoid"],teleport_duration:59}

execute as @e[type=item_display,tag=note_detector] at @s if block ~1 ~ ~ yellow_concrete run summon block_display 1047.0 ~ 1086.5 {block_state:{Name:"yellow_concrete"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~2 ~ ~ yellow_concrete run summon block_display 1048.0 ~ 1086.5 {block_state:{Name:"yellow_concrete"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~3 ~ ~ yellow_concrete run summon block_display 1049.0 ~ 1086.5 {block_state:{Name:"yellow_concrete"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~4 ~ ~ yellow_concrete run summon block_display 1050.0 ~ 1086.5 {block_state:{Name:"yellow_concrete"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~5 ~ ~ yellow_concrete run summon block_display 1051.0 ~ 1086.5 {block_state:{Name:"yellow_concrete"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~6 ~ ~ yellow_concrete run summon block_display 1052.0 ~ 1086.5 {block_state:{Name:"yellow_concrete"},Tags:["note","init_note","avoid"],teleport_duration:59}
execute as @e[type=item_display,tag=note_detector] at @s if block ~7 ~ ~ yellow_concrete run summon block_display 1053.0 ~ 1086.5 {block_state:{Name:"yellow_concrete"},Tags:["note","init_note","avoid"],teleport_duration:59}

# summon item_display,shulker
execute as @e[type=block_display,tag=init_note,tag=jumpover] at @s run summon item_display ~0.5 ~ ~0.5 {Tags:["note"],Passengers:[{id:"shulker",Tags:["note","jumpover"],Silent:1b,Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,active_effects:[{id:"invisibility",duration:-1,show_particles:0b}]}]}
execute as @e[type=block_display,tag=init_note,tag=onjump] at @s run summon item_display ~0.5 ~ ~0.5 {Tags:["note"],Passengers:[{id:"shulker",Tags:["note","onjump"],Silent:1b,Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,active_effects:[{id:"invisibility",duration:-1,show_particles:0b}]}]}
execute as @e[type=block_display,tag=init_note,tag=avoid] at @s run summon item_display ~0.5 ~ ~0.5 {Tags:["note"],Passengers:[{id:"shulker",Tags:["note","avoid"],Silent:1b,Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,active_effects:[{id:"invisibility",duration:-1,show_particles:0b}]}]}


# 岩盤が有ればゲームクリア
execute as @e[type=item_display,tag=note_detector_y1] at @s if block ~1 ~ ~ bedrock run function mynamespace:game_clear_flow/clear

# 黒曜石があれば折返しtp
execute as @e[type=item_display,tag=note_detector] at @s if block ~ ~ ~ obsidian run tp @s ~10 ~ ~-160

# 岩盤が無ければ続行
execute as @e[type=item_display,tag=note_detector_y1] at @s unless block ~1 ~ ~ bedrock run schedule function mynamespace:detect_note/detect 2t